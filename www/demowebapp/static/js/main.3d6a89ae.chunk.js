(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,n,o){e.exports=o(70)},68:function(e,n,o){},70:function(e,n,o){"use strict";o.r(n);var t=o(71),r=o(3),c=o(9),i=o.n(c),a=(o(42),o(72)),d=o(73),l=o(11),s=o(33),u=o(5),h=Object(l.a)(function(e){var n=e.state;return r.h(u.j,{id:"recordsTable",hover:!0},[r.thead([r.tr([r.th(["ID"]),r.th(["Name"])])]),r.tbody(n.records.map(function(e,o){return r.tr({id:o===n.indexSelected?"rowSelected":"",onClick:function(){n.indexSelected=o}},[r.td(e.id),r.td(e.name)])}))])}),m=o(1),f=o.n(m),p=Object(l.a)(function(e){var n=e.state,o=e.service,t=function(){n.modal.isShown=!n.modal.isShown},c=function(){n.modal.alert.isShown=!n.modal.alert.isShown},i=function(){return 0===n.modal.name.length?(n.modal.alert.isShown=!0,!1):(o.putRecord(n.modal.id,n.modal.name,function(){n.indexSelected=n.records.findIndex(function(e){return e.id===n.modal.id})}),n.modal.isShown=!1,!0)};return r.h(f.a.Fragment,[r.h(u.f,{autoFocus:!1,isOpen:n.modal.isShown,toggle:t},[r.h(u.i,{toggle:t},[n.modal.title]),r.h(u.g,[r.h(u.b,{id:"editForm"},[r.h(u.c,[r.h(u.e,"ID:",{for:"id_IDInput"}),r.h(u.d,{readOnly:!0,name:"name_IDInput",id:"id_IDInput",placeholder:"A unique alphanumerical ID",defaultValue:n.modal.id})]),r.h(u.c,[r.h(u.e,"Name:",{for:"id_NameInput"}),r.h(u.d,{autoFocus:!0,name:"name_NameInput",id:"id_NameInput",placeholder:"A person's name",value:n.modal.name,onKeyPress:function(e){"Enter"===e.key&&i()},onChange:function(e){n.modal.name=e.target.value}})])])]),r.h(u.h,[r.h(u.a,{color:"secondary",onClick:function(){n.modal.isShown=!1}},["Cancel"]),r.h(u.a,{color:"primary",onClick:i},["Save"])])]),r.h(u.f,{autoFocus:!1,isOpen:n.modal.alert.isShown,toggle:c},[r.h(u.i,{toggle:c},["Error"]),r.h(u.g,["The name cannot be empty"]),r.h(u.h,[r.h(u.a,{autoFocus:!0,color:"secondary",onClick:function(){n.modal.alert.isShown=!1}},["OK"])])])])}),v=Object(l.a)(function(e){var n=e.state,o=e.service;return r.div("#recordsbuttons",[r.h(u.a,{className:"recordButton",color:"secondary",disabled:!n.selectionActive(),onClick:function(){o.deleteRecord(n.records[n.indexSelected].id)}},["Delete"]),r.h(u.a,{className:"recordButton",color:"secondary",disabled:!n.selectionActive(),onClick:function(){n.modal.title="Edit person",n.modal.id=n.records[n.indexSelected].id,n.modal.name=n.records[n.indexSelected].name,n.modal.isShown=!0}},["Edit"]),r.h(u.a,{className:"recordButton",color:"secondary",onClick:function(){n.modal.title="New person",n.modal.id=n.getUniqueID(),n.modal.name="",n.modal.isShown=!0}},["New"]),r.h(p,{state:n,service:o})])}),w=Object(l.a)(function(e){var n=e.state,o=e.service;return r.div("#records",[r.h(h,{state:n}),r.h(v,{state:n,service:o})])}),S=o(31),b=o.n(S),g={},I=void 0,y=void 0;g.init=function(e){y=e,I=b.a.create({baseURL:window.location.protocol+"//"+window.location.host+"/demowebapp/api/",timeout:2e3})},g.fetchRecordsList=function(e){I?I.get("/records").then(function(e){var n;y.indexSelected=Math.min(y.indexSelected,Object.keys(e.data).length-1),y.records=(n=e.data,Object.keys(n).map(function(e,o){return{id:e,name:n[e].name}}))}).then(function(){e&&e()}).catch(function(e){return console.error("An error occurred: "+e),null}):console.error("Service not initialized")},g.deleteRecord=function(e){I?I.delete("/record/"+e).then(function(){g.fetchRecordsList()}).catch(function(e){return console.error("An error occurred: "+e),null}):console.error("Service not initialized")},g.putRecord=function(e,n,o){I?I.put("/record/"+e,{name:n}).then(function(){g.fetchRecordsList(o)}).catch(function(e){return console.error("An error occurred: "+e),null}):console.error("Service not initialized")};var k=Object(s.a)({componentDidMount:function(){g.init(this.props.state),g.fetchRecordsList(),setInterval(function(){g.fetchRecordsList()},6e3)}})(Object(l.a)(function(e){var n=e.state;return r.h(a.a,[r.h(d.a,{exact:!0,path:"/",render:function(){return[r.h(w,{state:n,key:"records",service:g})]}})])})),x=(o(68),o(7)),O=Object(x.j)({indexSelected:0,modal:{isShown:!1,title:"",id:"",name:"",alert:{isShown:!1}},records:[],selectionActive:function(){return O.records.length>0&&O.indexSelected>=0},getUniqueID:function(){return""+(O.records.reduce(function(e,n){var o=parseInt(n.id,10);return o>e?o:e},0)+1)}});i.a.render(r.h(t.a,{basename:"/demowebapp"},[r.h(k,{state:O})]),document.getElementById("root"))}},[[35,2,1]]]);
//# sourceMappingURL=main.3d6a89ae.chunk.js.map